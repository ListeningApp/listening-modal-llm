{
  "id": "chatcmpl-A3UEJeKO5ZuCqqAndtW7PbVW0f4wb",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "qt5x | In the following graph, you will see that just around the turn of the century, the GDP rate of change since nineteen eighty slowed down, and the rate of change of Remittances per Capita overtook it:\ncc6l | Chapter Six\nw8g7 | Moving average\n0lyq | The moving average is a powerful table calculation because it gives you the ability to determine how many previous and future values are included in an average.\nmk88 | For instance, we can change the percent difference table calculation that we performed on Remittances per Capita by performing the following steps:\nkft0 | One. Click on the Context menu of Remittances per Capita on the Rows shelf.\nafqg | Two. Click on Clear Table Calculation.\nvz07 | Three. Click on the Context menu of Remittances per Capita again, select Quick Table Calculation, and then choose Moving Average.\n8wou | We cleared the table calculation for GDP (current U S D) in the following graph as well.\n6x7z | Level of Detail and Table Calculations\n1q42 | The following graph shows the moving average of Remittances per Capita since nineteen eighty versus the GDP:\n5ycu | One thing that we don't know is exactly how smooth the line is. The term \"smooth\" means that more than one value is included in the calculation, and if we edit the table calculation, we can control the smoothing. You can also create a parameter that gives users a control over the smoothing. More on this will be discussed later in the book.\nlhe0 | Editing table calculations\narcp | So far, we have used only the default settings for the table calculations that we have created. Tableau Public gives us several capabilities. Right-clicking on the pill for the moving average of Remittances per Capita shows us the following options that are available for this field:\n8wsg | Calculation Type: We can change the type of calculation via this option. Tableau Public automatically creates a different calculated field depending on our selection, and the options available in this user interface also vary based on the selection.\nm65y | Chapter Six\nm652 | Summarize values using: This gives us the option to select the aggregation type. Ours is a sum, but we can use average, minimum, and maximum in this type of calculation.\n00j4 | Moving along (or Compute using, with other table calculation types): This allows us to address the table calculation. In this example, we have only three options, namely Table (Across), Cell, or Date. The default is to compute by going across the table, which means that Tableau Public computes the values by going from left to right or top to bottom, depending on the location of the dimensions and measures.\nfkpa | When you click on the drop-down list, you can customize the way the field is computing by telling Tableau Public which fields to Compute using the first field, then the second, and so on. In the following screenshot, we have only one dimension, namely Year, in use. In case there were others, they would appear in the Partitioning pane, and we could add them to the Addressing pane and then sort them again. More on this will be discussed later.\n7ovw | The dimensions that we do not select for Compute using are used for partitioning, which is called grouping:\n7h0s | Level of Detail and Table Calculations\n7cdl | The next feature allows you to tell Tableau Public how many previous and future values to include, and you can also determine whether the current values should be included. Lines that are smoother include more previous and future values as shown in the following screenshot:\n8mej | Null if there are not enough values, when selected, does not compute marks for places when there are not enough values. For instance, if you select this for this particular calculation, then the first two years in the visualization will not show a line.\nmlec | Perform a secondary calculation on the result gives you the power to add additional table calculations. For instance, if this were a running sum that shows the cumulative total, we can use a percentage of the total secondary calculation to show the percentage accumulated for each year instead of the discrete number.\nllys | Manually editing table calculations\nrmu5 | Learning how to edit table calculations yourself is an advanced capability, but it gives you the opportunity to create rich metrics, such as the percent difference from an average.\n3o98 | In the first example, we will modify the running sum of Remittances per Capita so that it includes the preceding and next three values, which can be done from the edit table calculation dialogue by entering those numbers in their respective places.\nzd6z | In the second example, we will modify the Remittances per Capita percent difference table calculation to show the percent difference from the average.\nk1a2 | Chapter Six\nnlu6 | Let's begin with the first example. We'll modify the running sum in the following way:\nsiqn | One. In order to edit the table calculation, duplicate the sheet on which we created the original moving average worksheet, which maintains the integrity of the work that we have already done.\n2ae7 | Two. Then, drag the pill for the moving average of Remittances per Capita from the Rows shelf to the Measures shelf, which prompts us to rename it. Let's call it Smoother Remittances per Capita.\nu9wd | Three. The original table calculation, as shown in the following screenshot, has one function, one expression, a start offset, and an end offset:\n6i0o | The WINDOW_AVG function tells Tableau Public that the field can be addressed and we want it to apply the average function to the values.\n54u3 | The expression, in this case, is the field on which the calculation is operating.\n1x9z | The start offset, by default, is two places prior to end offset and hence, it has the negative sign.\n4235 | The end offset, by default, is at the current value, as shown in the following screenshot:\n8xlb | Four. Modify this calculated field to include three previous and three future values by replacing negative two and zero with three and three respectively, as shown in the following screenshot. You can also create an integer parameter and allow users to set the number. We will show you how to do that in the chapter on parameters:\nj21f | Level of Detail and Table Calculations\njftb | The result is a calculated field that is much smoother than the original one.\ngj9e | In the second example, we'll calculate the percentage difference from the average Remittances per Capita. First, we will show you the original calculated field, and then, we'll show the changes that we made.\n12a1 | We duplicated the sheet on which we were working and then dragged the percent differences of the Remittances per Capita field to the Measures pane, where we renamed it to Remittances per Capita percent Diff from Average, as shown in the following screenshot:\nucuv | In the formula box, Tableau Public calculates the value for each year, subtracts the value of the first year from it, and divides it with the value for the first year.\n2tn9 | The following are a few new functions in this formula:\n0g39 | ZN: This means that Tableau Public uses zero if the value is null.\n3qn6 | LOOKUP: This finds a value specified by an offset from the current value. In this case it's negative one, which means the previous value, but it could be anything. The other values are the FIRST() and LAST() functions.\n65yq | ABS: This takes the absolute value of the previous value. When writing table calculations, you should always use ZN and ABS, even if you think you don't need them at the time, because you do not necessarily know what will be in your data set in the future.\np4rq | In order for this to be the percent difference from the average, change the references to the first value to the references to the WINDOW_AVG.\n33o8 | Replace LOOKUP with WINDOW_AVG.\nfopo | Then, delete both instances of the string and the FIRST() function, because in this case, the WINDOW_AVG does not need an offset, like we had in the previous exercise. We want to use the average for the whole partition.\nb12h | Chapter Six",
        "role": "assistant",
        "function_call": null,
        "tool_calls": null,
        "refusal": null
      }
    }
  ],
  "created": 1725394551,
  "model": "gpt-4o-2024-05-13",
  "object": "chat.completion",
  "system_fingerprint": "fp_fde2829a40",
  "usage": {
    "completion_tokens": 1745,
    "prompt_tokens": 3456,
    "total_tokens": 5201
  }
}