{
  "id": "chatcmpl-A3UEFz7CHZxhUzLjJfRDx434keJLl",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "pqyp | Aggregation functions in Tableau Public are performed typically on numeric fields. In this section, we will show you how to use the default aggregations on visualizations as well as how to use them in calculated fields.\nnev2 | The following are the aggregate functions that are available for you to apply on a field are also available in the calculated field dialog box. Tableau Public has arranged them in order from the greatest to the least commonly used functions for the visualization as follows:\nlo13 | . SUM: This adds up the values within a partition\n1gm9 | . Average: This sums the measure and divides it by the number of dimension members in the partition\n94yd | . Median: This provides the measure value that's halfway between the greatest and least values\nox3w | . COUNT and COUNTD: These count the number of dimension members and the number of distinct dimension members respectively; they are typically performed on dimensions rather than measures\n2ai3 | . Minimum and Maximum: These take the least and greatest values in the partition respectively\ndu4q | . Percentile: This provides the numeric value at which a percentage of the partition that you specify falls beneath\nv86a | . Standard Deviation: This is the square root of the variance for a data set, and it is the unit of measurement of distance from the mean within a data set; it is commonly represented by the Greek letter, sigma\nexkc | Chapter Five\nj83u | . Variance: This is the average distance from the mean value, and it's used to measure the distribution of a data set\n6vco | The variance and standard deviation are two of the basic measurements in statistics. Advanced statistics in Tableau Public are beyond the scope of this book, but if you understand the concepts, you will find that there are several capabilities within Tableau Public that provide rich statistical functionality.\nrnzk | The most basic aggregation is a sum, and it's the default for numeric fields in Tableau. The second and third most basic aggregations are counts and averages. When you add a measure to a visualization, Tableau Public automatically sums it. In the following example, which uses the data on global floods that we referenced earlier, we do the following three things to create a map:\ndflu | One. Double-click on Country in the Dimensions pane to create a symbol map.\nyat3 | Two. Double-click on SUM(Affected square kilometers) in the Measures pane to change the map into a filled map.\ntp87 | Three. Right-click on the Context menu for the color legend. Change it to a reversed orange-blue diverging color spectrum so that the higher numbers represent greater flood damage, as shown in the following screenshot:\n7wep | Note that on the Marks card, Affected square kilometers is summed. Therefore, you see the total area affected for each country in the whole data set. There is a major flaw with this method of aggregation, it is not normalized. It would be more useful to have a rate, such as the average area affected per flood, or to add context by creating an aggregation that tells you the percentage of the total area that was affected. For instance, we know that in Pakistan, there were catastrophic floods in two thousand ten, and China traditionally also has had severe floods. However, these countries are in blue, which seemingly indicates that their floods were less severe.\n70t5 | Let's start changing aggregations, and thus add context and reduce the likelihood that someone will misinterpret our visualization, by changing the Measure function to an Average function. The easiest way to do this is by performing the following steps:\nkwz0 | · Click on your aggregation context menu.\nvool | · Click on Measure(SUM).\njwym | · Click on Average.\numh8 | Changing this measure to an Average will average the square kilometers of all of the rows related to each country. This means that if there were three floods in the US and they affected one million, two million, and three million square kilometers respectively, then the average would be two million.\n1zay | If you would like to set the default aggregation for a field, you can right-click on it in the Measures pane, click on Default Properties, select Aggregation, and select the appropriate aggregation for your needs.\nns7i | The result is a visualization that shows much more appropriate context. From this, we can gauge the average severity in terms of the total area affected by each flood in every country. In the next chapter, we will rank the countries, which adds even more context and relates them to each other for the user.\nfztd | We added the number of records as well as the sum of the affected square miles to the tooltip so that when you roll over a country, you see the total number of floods, the total area affected, and the average area affected by each flood, as shown in the following screenshot. Using a tooltip is a great way of adding context, which is the art of relating two data points to each other and to the consumer:\no5o5 | Chapter Five\nr5z1 | The logic functions\nj696 | Logic functions enable you to tell Tableau Public what to do when certain conditions are met. They are also known as conditional statements. The format is commonly referred to as IF THEN ELSE. You, as a programmer, ask Tableau to test whether a row of data meets a certain condition. If it does meet the condition, then there is an output, which can be another field, a discrete number, or a string. If the condition is not met, then you want a different output.\n34d0 | There are several logic functions in Tableau. Some of these functions are sub-functions or parts of others. We will focus on the following major functions:\n9ugn | . IF, followed by THEN, ELSE-IF, or ELSE: This tests whether a condition is met and show the result if it is met as well as other conditions that need to be tested and results that need to be produced in case none of the conditions are met.\nzvft | . The IIF statement: This tests for a minimum of one condition and then provides the results when the condition is or is not met. It follows the same format as that of IF in Microsoft Excel.\nc1b3 | . The IFNULL function: This identifies what Tableau Public should do in case a value is null. This is particularly useful for aggregations of dirty data sets, which are very common.\nk969 | . The CASE statement: This tells Tableau Public what to do when a parameter or a string field has a very specific value. Unlike the CASE statements in ANSI SQL, Tableau Public does not accept aggregations in these.\nvt1d | . AND, OR, and NOT: These link or negate conditions that need to be met.\n24sn | . END: This is critically important, as it terminates the loops of the IF and CASE statements. Tableau Public will tell you in case you need to add it and have not done so.\no0sh | The IF statements are very useful. You can use them to group members and set thresholds, among many other uses. The condition that needs to be met can be a variety of things. In the first example, we will create a new measure in a transformation of the World Bank indicator data that we have extracted and transformed, and it's called population and land data.\n3max | We will create a new measure that gives us the total land area of a country. We want to use this measure to determine the percentage of each country's area that was flooded, but this measure does not exist in the Floods data, but it does exist in the Population and Land Data. Later in this chapter, we will blend the data sources to create a calculated field that uses it in the denominator.\nsysw | The Population and Land Data does not have a metric called total area. The way the data source is structured, the measures are in rows and not columns, with a field representing the corresponding metric value, as shown in the following screenshot. We need to create a calculated field that states that if Indicator Name is Land area (square kilometers), then we want the Indicator Value to appear as follows:\nnbik | Chapter Five",
        "role": "assistant",
        "function_call": null,
        "tool_calls": null,
        "refusal": null
      }
    }
  ],
  "created": 1725394547,
  "model": "gpt-4o-2024-05-13",
  "object": "chat.completion",
  "system_fingerprint": "fp_fde2829a40",
  "usage": {
    "completion_tokens": 1672,
    "prompt_tokens": 3371,
    "total_tokens": 5043
  }
}